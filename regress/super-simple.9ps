const (
	version = "9P2000"
	msize = 4194304:u32
	notag = -1:u16

	Tversion = 100:u8
	Rversion = 101:u8
)

testing "if version works" dir "./root" {
	send(Tversion, notag, msize, version)
	m = recv()
	assert m.type == Rversion
	# print("the response is", m)
}

testing "fails when sending a R-message" dir "./root" should-fail {
	send(Rversion, notag, msize, version)
	# the client should close the connection
	recv()
}
